<!DOCTYPE html>
<html>

<head>
<link rel="stylesheet" type="text/css" href="game.css">

<style type="text/css">

</style>
</head>

<body>
<div id="header" >
<button onclick="fnstart()">Start</button>

<p id="gamecontrols" display: none;>
<b>Timer:</b>
<lable id="timer">
</lable>

<b>Current Time:</b>
<lable  id="currentTime">
</lable>

<b>Wrong Attempts:</b>
<lable  id="wrongAttempts">
</lable>

</p>


</div>

<div id="canvas" >
	<pre id='t2'> Welcome to an interesting game of numbers	

	</pre> 
</div>

<div id="gamecontrol"> </div>

<script>


function startTimer(){
	var timer=0;
	setInterval(function(){document.getElementById("timer").innerHTML = ++timer + "secs"},1000);
	var myVar=setInterval(function(){myTimer()},1000);
}


var previousNumber = -1;




function myTimer() {
    var d = new Date();
    document.getElementById("currentTime").innerHTML = d.toLocaleTimeString();
}
var wrongAttempts=0;

function fnNumberClick(elmnt) {
    var currentNum = parseInt(elmnt.innerHTML);

	if(previousNumber == -1 && currentNum==0){
		elmnt.style.color = 'blue';
		elmnt.style.background = 'grey';
		previousNumber=currentNum;
	}else{
		//alert("Please click the lowest number to start");
		wrongAttempts ++ ;
		document.getElementById("wrongAttempts").innerHTML = wrongAttempts;
	}

	if(previousNumber != -1 && (previousNumber+1) == currentNum){
		elmnt.style.color = 'blue';
		elmnt.style.background = 'grey';
		previousNumber = currentNum;
	}else if(previousNumber != -1 ){
		//alert("Hint: your previous Number was: "+previousNumber);
		wrongAttempts ++ ;
		document.getElementById("wrongAttempts").innerHTML = wrongAttempts;
	}
    
   // alert(elmnt.innerHTML);
}

var randomGeneratedSeries = "";
function fnstart() {
    
    //document.getElementById("gamecontrols").display="TRUE"
    startTimer();
    randomGeneratedSeries = "";
    buildCanvas();
}
var fontTag = "<font onclick='fnNumberClick(this)''>?</font>";
function buildCanvas(){
	var canvasString = "<pre id='t2'> ";
	var gridSize = 0;

	
	for(index=0;index<100;index++){
		//canvasString = canvasString +"<input type = button name='"+ index +"' value='"+ index +"'/>";
		
		// for adding random numbers in canvas
		canvasString = canvasString +/*index*/ fontTag.replace('?', fngenerateNumber())  +"\t";
		
		// for adding number in a sequence in the canvas
		//canvasString = canvasString + index + ", ";


		// logic for setting the grid size
		gridSize++;

		if(gridSize == 10){
			gridSize = 0;
			canvasString = canvasString + "<br>"
		}
	}
	canvasString = canvasString + "</pre>";
    document.getElementById("canvas").innerHTML = canvasString;

}

function fngenerateNumber(){
	
	var randomNumber = "";
	while(true){
		randomNumber = fnrandomNumber();
		
		if(randomGeneratedSeries.search(randomNumber) == -1){
			//alert( randomNumber);
			randomGeneratedSeries = randomGeneratedSeries + randomNumber + ", ";
			//document.getElementById("gamecontrol").innerHTML = randomGeneratedSeries;
			return randomNumber;
		}else {
			//alert("Random number"+randomNumber + "series:"+randomGeneratedSeries);
			if(randomGeneratedSeries.length>=400){
				alert("Random number"+randomNumber + "series:"+randomGeneratedSeries);
				break;
			}
		}
		
	}
	
}

function fnrandomNumber(){
	// number within 100 exclusive
	var random = Math.random() * 100;
	random = Math.floor(random);
	random = ""+random;
	if(random.length==1){
		random = "0"+random;
	}
	return random;
}
</script>

</body>
</html> 
